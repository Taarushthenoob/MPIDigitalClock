EMU8086 GENERATED LISTING. MACHINE CODE <- SOURCE.
 
onPaperDesignCode.bin -- emu8086 assembler version: 4.08  
 
[ 19-04-2021  --  13:48:33 ] 
 
===================================================================================================
[LINE]     LOC: MACHINE CODE                          SOURCE
===================================================================================================
 
[   1]        :                                       #make_bin#
[   2]        :                                       
[   3]        :                                       ; BIN is plain binary format similar to .com format, but not limited to 1 segment;
[   4]        :                                       ; All values between # are directives, these values are saved into a separate .binf file.
[   5]        :                                       ; Before loading .bin file emulator reads .binf file with the same file name.
[   6]        :                                       
[   7]        :                                       ; All directives are optional, if you don't need them, delete them.
[   8]        :                                       
[   9]        :                                       ; set loading address, .bin file will be loaded to this address:
[  10]        :                                       #LOAD_SEGMENT=0000h#
[  11]        :                                       #LOAD_OFFSET=0000h#
[  12]        :                                       
[  13]        :                                       ; set entry point:
[  14]        :                                       #CS=0000h#	; same as loading segment
[  15]        :                                       #IP=0000h#	; same as loading offset
[  16]        :                                       
[  17]        :                                       ; set segment registers
[  18]        :                                       #DS=0000h#	; same as loading segment
[  19]        :                                       #ES=0000h#	; same as loading segment
[  20]        :                                       
[  21]        :                                       ; set stack
[  22]        :                                       #SS=0000h#	; same as loading segment
[  23]        :                                       #SP=FFFEh#	; set to top of loading segment
[  24]        :                                       
[  25]        :                                       ; set general registers (optional)
[  26]        :                                       #AX=0000h#
[  27]        :                                       #BX=0000h#
[  28]        :                                       #CX=0000h#
[  29]        :                                       #DX=0000h#
[  30]        :                                       #SI=0000h#
[  31]        :                                       #DI=0000h#
[  32]        :                                       #BP=0000h#
[  33]        :                                       
[  34]    0000: E9 9D 03                              	jmp     st1
[  35]    0003: 90                                    	nop
[  36]    0004: 00 00                                 	dw 0000h
[  37]    0006: 00 00                                 	dw 0000h
[  38]    0008: 00 00 00 00 00 00 00 00 00 00 00 00   	dw 76 dup(0000h);set all interrupts before int 40h as zero
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00             
[  39]        :                                       	
[  40]    00A0: 71 04                                 	dw opt1; set int 40h to opt1
[  41]    00A2: 00 00                                 	dw 0000h
[  42]    00A4: CA 04                                 	dw start1;set int 41h  to start1
[  43]    00A6: 00 00                                 	dw 0000h
[  44]    00A8: 00 00 00 00 00 00 00 00 00 00 00 00   	db 380 dup (0); set rest of IVT as zero, since it is not used
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00             
[  45]    0224: 00 00 00 00 00 00 00 00 00 00 00 00   	db 380 dup(0)
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00 00 00 00 00 
                00 00 00 00 00 00 00 00             
[  46]        :                                       
[  47]    03A0: FB                                    st1:    sti 					; clear interrupt flag, because we won't be using maskable innterrupts
[  48]        :                                       
[  49]    03A1: B8 00 02                              mov       ax,200h		; intialize ds, es,ss to start of RAM
[  50]    03A4: 8E D8                                 mov       ds,ax
[  51]    03A6: 8E C0                                 mov       es,ax
[  52]    03A8: 8E D0                                 mov       ss,ax
[  53]    03AA: BC FE 0F                              mov       sp,0FFEH
[  54]        :                                       		
[  55]        :                                       								
[  56]        :                                       	port1a equ 00h				
[  57]        :                                       	port1b equ 02h; ports for 8255A
[  58]        :                                       	port1c equ 04h
[  59]        :                                       	creg1 equ 06h
[  60]        :                                       
[  61]        :                                       	port2a equ 10h				
[  62]        :                                       	port2b equ 12h
[  63]        :                                       	port2c equ 14h; ports for 8255B
[  64]        :                                       	creg2 equ 16h
[  65]        :                                       	
[  66]        :                                       						
[  67]        :                                       	counter_0 equ 08h
[  68]        :                                       	counter_1 equ 0Ah			
[  69]        :                                       	creg equ 0Eh;ports for 8254 timer
[  70]        :                                       	
[  71]        :                                       	port3a equ 18h
[  72]        :                                       	port3b equ 1Ah; ports for 8259
[  73]        :                                       	
[  74]    03AD: B0 80                                 	mov al,10000000b 			
[  75]    03AF: E6 16                                 	out creg2,al;setting all ports of 8255B for mode 0 output
[  76]        :                                       	
[  77]    03B1: B0 9B                                 	mov al,10011011b 			
[  78]    03B3: E6 06                                 	out creg1,al;seting all ports of 8255A for mode 0 input
[  79]        :                                       	
[  80]        :                                       	; To run the clock, we need interrupts at an interval of 1 sec (so as to update the value of second).
[  81]        :                                       	; 8254 is running on 2.5MHz clock => We must divide by (25000)d or (61A8)h in order to get a out frequency of 100Hz which is the clock input for counter1
[  82]        :                                       	; to which we give a count of (100)d or (0064)h square wave of 0.5 sec up and 0.5 down
[  83]        :                                       	; Note that we are using mode 3, i.e. square wave generation mode
[  84]        :                                       	
[  85]    03B5: B0 36                                 		  mov       al,00110110b	
[  86]    03B7: E6 0E                                 		  out       creg,al
[  87]    03B9: B0 76                                 		  mov       al,01110110b
[  88]    03BB: E6 0E                                 		  out       creg,al
[  89]    03BD: B0 A8                                 		  mov       al,0A8h
[  90]    03BF: E6 08                                 		  out       counter_0,al
[  91]    03C1: B0 61                                 		  mov       al,61h
[  92]    03C3: E6 08                                 		  out       counter_0,al
[  93]    03C5: B0 64                                 		  mov       al,64h
[  94]    03C7: E6 0A                                 		  out       counter_1,al
[  95]    03C9: B0 00                                 		  mov       al,00h
[  96]    03CB: E6 0A                                 		  out       counter_1,al
[  97]        :                                       	
[  98]        :                                       	;ICW1,2 &4 and OCW1 for 8259
[  99]        :                                       	
[ 100]    03CD: B0 13                                 	      mov       al,13h
[ 101]    03CF: E6 18                                 	      out       port3a,al
[ 102]    03D1: B0 40                                 	      mov       al,40h
[ 103]    03D3: E6 1A                                 	      out       port3b,al
[ 104]    03D5: B0 01                                 	      mov       al,01h
[ 105]    03D7: E6 1A                                 	      out       port3b,al	
[ 106]    03D9: B0 FC                                 	      mov       al,0FCh
[ 107]    03DB: E6 1A                                 	      out       port3b,al
[ 108]        :                                       
[ 109]        :                                       	;initialisation of lcd
[ 110]        :                                       
[ 111]    03DD: B0 38                                 		MOV AL, 38H 			;initialize LCD for 2 lines & 5*7 matrix
[ 112]    03DF: E6 12                                 		out port2b,al
[ 113]    03E1: B0 01                                 		mov al,01h  			;clearscreen
[ 114]    03E3: E6 14                                 		out port2c,al
[ 115]    03E5: B0 00                                 		MOV AL, 00000000B 		;RS=0,R/W=0,E=0 for H-To-L pulse
[ 116]    03E7: E6 14                                 		out port2c,al
[ 117]    03E9: E8 57 01                              		call delay_20ms
[ 118]        :                                       		
[ 119]    03EC: B0 0E                                 		MOV AL, 0EH 			;LCD on, cursor on and no blink character
[ 120]    03EE: E6 12                                 		out port2b,al
[ 121]    03F0: B0 01                                 		mov al,01h
[ 122]    03F2: E6 14                                 		out port2c,al
[ 123]    03F4: B0 00                                 		mov al,00h
[ 124]    03F6: E6 14                                 		out port2c,al
[ 125]    03F8: E8 48 01                              		call delay_20ms
[ 126]        :                                       		
[ 127]    03FB: B0 06                                 		MOV AL, 06  			;command for shifting cursor right
[ 128]    03FD: E6 12                                 		out port2b,al
[ 129]    03FF: B0 01                                 		mov al,01h
[ 130]    0401: E6 14                                 		out port2c,al
[ 131]    0403: B0 00                                 		mov al,00h
[ 132]    0405: E6 14                                 		out port2c,al
[ 133]    0407: E8 39 01                              		call delay_20ms
[ 134]        :                                       	;initialisation end
[ 135]        :                                       				
[ 136]        :                                       		; Setting the default values
[ 137]        :                                       		
[ 138]    040A: C6 06 5F 0F 00                        		mov second,0
[ 139]    040F: C6 06 60 0F 00                        		mov min,0
[ 140]    0414: C6 06 61 0F 0D                        		mov hour,13
[ 141]    0419: C6 06 68 0F 01                        		mov hour_12,1
[ 142]    041E: C6 06 67 0F 00                        		mov format_check,0
[ 143]    0423: C6 06 69 0F 01                        		mov phase,1				; Initiazed time to 1:00:00 pm
[ 144]        :                                       		
[ 145]    0428: C6 06 62 0F 01                        		mov day,1
[ 146]    042D: C6 06 63 0F 01                        		mov month,1
[ 147]    0432: C6 06 64 0F 15                        		mov year,21				; setting date to 1/1/2021
[ 148]        :                                       		
[ 149]    0437: C6 06 5A 0F 3C                        		mov count_sec,60
[ 150]    043C: C6 06 5B 0F 3C                        		mov count_min,60
[ 151]    0441: C6 06 5C 0F 18                        		mov count_hour,24
[ 152]    0446: C6 06 5D 0F 1E                        		mov count_day,30
[ 153]    044B: C6 06 5E 0F 0C                        		mov count_month,12		; the total number of seconds in a min, minutes in an hour, etc.
[ 154]        :                                       				
[ 155]        :                                       		
[ 156]        :                                       										
[ 157]    0450: C6 06 6A 0F 0D                        		mov alarm_hour,13
[ 158]    0455: C6 06 6B 0F 01                        		mov alarm_hour_12,1
[ 159]    045A: C6 06 6C 0F 02                        		mov alarm_min,2
[ 160]    045F: C6 06 6D 0F 01                        		mov alarm_phase,1		; setting alarm for 1:02 pm
[ 161]        :                                       		
[ 162]        :                                       		
[ 163]        :                                       		; the main program
[ 164]        :                                       			
[ 165]    0464:                                       polling:
[ 166]    0464: E4 00                                 in al,port1a
[ 167]    0466: 24 10                                 		and al,10h 			
[ 168]    0468: 3C 10                                 		cmp al,10h			;Checking whether the alarm is on or off.
[ 169]    046A: 75 03                                 		jne x11				;Keep polling
[ 170]    046C: E8 72 08                              		call buzzer			;alarm is ON
[ 171]    046F: EB F3                                 x11:	jmp polling			;Keep polling		
[ 172]        :                                       
[ 173]        :                                       ;end of main program
[ 174]        :                                       
[ 175]        :                                       
[ 176]        :                                       ; ISR associated with INTR from IR0 (given by 8259) compares position of thumbswitch and decides which function to call based on it
[ 177]        :                                       	    ; if witch is set to set_hour => this ISR will call the functionn set_hour		
[ 178]        :                                       				
[ 179]    0471:                                       opt1:
[ 180]    0471: FB                                    sti
[ 181]        :                                       		
[ 182]    0472: E4 04                                 	in al,port1c        ;debounce in slideswitch
[ 183]    0474: 8A D8                                 		mov bl,al
[ 184]    0476: E8 CA 00                              		call delay_20ms
[ 185]    0479: E4 04                                 		in al,port1c
[ 186]    047B: 3A C3                                 		cmp al,bl				; if the two values are diff, iret
[ 187]    047D: 75 46                                 		jne mn8			
[ 188]        :                                       							
[ 189]    047F: 3C 80                                 	cmp al,80h			;Set Hour
[ 190]    0481: 75 05                                 		jne mn1		
[ 191]    0483: E8 80 03                              		call set_hour
[ 192]    0486: EB 3D                                 		jmp mn8
[ 193]    0488: 3C 40                                 mn1:	cmp al,40h 			;Set Minute
[ 194]    048A: 75 05                                 		jne mn2
[ 195]    048C: E8 E2 04                              		call set_minute
[ 196]    048F: EB 34                                 		jmp mn8
[ 197]    0491: 3C 20                                 mn2:	cmp al,20h 			;Set Second
[ 198]    0493: 75 05                                 		jne mn3
[ 199]    0495: E8 C7 05                              		call set_second
[ 200]    0498: EB 2B                                 		jmp mn8
[ 201]    049A: 3C 10                                 mn3:	cmp al,10h 			;Set Date
[ 202]    049C: 75 05                                 		jne mn4
[ 203]    049E: E8 46 05                              		call set_date
[ 204]    04A1: EB 22                                 		jmp mn8
[ 205]    04A3: 3C 08                                 mn4:	cmp al,08h 			;Set Month
[ 206]    04A5: 75 05                                 		jne mn5
[ 207]    04A7: E8 52 04                              		call set_month
[ 208]    04AA: EB 19                                 		jmp mn8
[ 209]    04AC: 3C 04                                 mn5:	cmp al,04h 			;Set Year
[ 210]    04AE: 75 05                                 		jne mn6
[ 211]    04B0: E8 22 06                              		call set_year
[ 212]    04B3: EB 10                                 		jmp mn8
[ 213]    04B5: 3C 02                                 mn6:	cmp al,02h 			;Set Alarm Hour
[ 214]    04B7: 75 05                                 		jne mn7
[ 215]    04B9: E8 91 06                              		call set_alarm_hour
[ 216]    04BC: EB 07                                 		jmp mn8
[ 217]    04BE: 3C 01                                 mn7:	cmp al,01h			;Set Alarm Min
[ 218]    04C0: 75 03                                 		jne mn8
[ 219]    04C2: E8 98 07                              		call set_alarm_min
[ 220]        :                                       		
[ 221]    04C5:                                       mn8:		
[ 222]    04C5: B0 20                                 mov       al,20h
[ 223]    04C7: E6 18                                 	    out       port3a,al
[ 224]    04C9: CF                                    iret            ; After one of them has been done, we need to repeat the polling process
[ 225]        :                                       
[ 226]        :                                       ; end of ISR associated with INTR from IR0. (given by 8259(int 40h))
[ 227]        :                                       
[ 228]        :                                       	
[ 229]        :                                       	; ISR associated with INTR from IR1 (given by 8259) compares seconds, minutes, etc increments them if necessary
[ 230]        :                                       	;if second reaches 60, reset it to 0 and increment minute and so on for hour, day, month and year
[ 231]    04CA:                                       start1:
[ 232]    04CA: FB                                    sti
[ 233]    04CB: A0 5F 0F                              	mov al,second					;inc second
[ 234]    04CE: FE C0                                 	inc al
[ 235]    04D0: A2 5F 0F                              	mov second,al
[ 236]    04D3: 3A 06 5A 0F                           	cmp al,count_sec				; check if the seconds have reached 60
[ 237]    04D7: 75 62                                 	jne y1							
[ 238]        :                                       	
[ 239]    04D9: C6 06 5F 0F 00                        	mov second,00					
[ 240]    04DE: A0 60 0F                              	mov al,min						
[ 241]    04E1: FE C0                                 	inc al
[ 242]    04E3: A2 60 0F                              	mov min,al
[ 243]    04E6: A0 60 0F                              	mov al,min
[ 244]    04E9: 3A 06 5B 0F                           	cmp al,count_min
[ 245]    04ED: 75 4C                                 	jne y1							
[ 246]        :                                       
[ 247]    04EF: C6 06 60 0F 00                        	mov min,00						; Increment hour if minutes reached 60
[ 248]    04F4: A0 61 0F                              	mov al,hour
[ 249]    04F7: FE C0                                 	inc al
[ 250]    04F9: A2 61 0F                              	mov hour,al
[ 251]    04FC: 3A 06 5C 0F                           	cmp al,count_hour
[ 252]    0500: 75 39                                 	jne y1							
[ 253]        :                                       
[ 254]    0502: C6 06 61 0F 00                        	mov hour,00						
[ 255]    0507: A0 62 0F                              	mov al,day
[ 256]    050A: FE C0                                 	inc al
[ 257]    050C: A2 62 0F                              	mov day,al
[ 258]    050F: A0 62 0F                              	mov al,day					
[ 259]    0512: 3A 06 5D 0F                           	cmp al,count_day				
[ 260]    0516: 75 23                                 	jne y1							
[ 261]        :                                       
[ 262]    0518: C6 06 62 0F 01                        	mov day,1						
[ 263]    051D: A0 63 0F                              	mov al,month			
[ 264]    0520: FE C0                                 	inc al
[ 265]    0522: A2 63 0F                              	mov month,al
[ 266]    0525: A0 63 0F                              	mov al,month
[ 267]    0528: 3A 06 5E 0F                           	cmp al,count_month				; compare month with 12
[ 268]    052C: 75 0D                                 	jne y1							
[ 269]        :                                       
[ 270]    052E: C6 06 63 0F 01                        	mov month,1						;increment year
[ 271]    0533: A0 64 0F                              	mov al,year
[ 272]    0536: FE C0                                 	inc al
[ 273]    0538: A2 64 0F                              	mov year,al
[ 274]    053B: E8 0E 00                              y1:	call display
[ 275]    053E: B0 21                                 mov       al,21h
[ 276]    0540: E6 18                                 out       port3a,al
[ 277]    0542: CF                                    	iret
[ 278]        :                                       
[ 279]        :                                       ; end of ISR associated with INTR from IR1. (given by 8259(int 41h))
[ 280]        :                                       	
[ 281]        :                                       ; procedure for delaying sequential execution of program by 20ms
[ 282]    0543:                                       delay_20ms proc near
[ 283]    0543: 51                                    				push 	cx
[ 284]    0544: B9 84 03                              				mov 	cx,900d
[ 285]        :                                       				
[ 286]    0547: 90                                    dl1:			nop							
[ 287]    0548: E2 FD                                 				loop 	dl1					
[ 288]        :                                       				
[ 289]    054A: 59                                    				pop 	cx					
[ 290]    054B: C3                                    				ret
[ 291]        :                                       delay_20ms endp
[ 292]        :                                       
[ 293]        :                                       
[ 294]        :                                       
[ 295]        :                                       ;procedure to display clock
[ 296]    054C:                                       display proc near		
[ 297]        :                                       		
[ 298]        :                                       	;format_check: 1 = 24hr & 0 = 12hr
[ 299]        :                                       	
[ 300]        :                                       		
[ 301]        :                                       		;input format check
[ 302]    054C: E4 00                                 		in al,port1a
[ 303]    054E: 24 01                                 		and al,01h
[ 304]    0550: A2 67 0F                              		mov format_check,al 		
[ 305]        :                                       		
[ 306]        :                                       		;clearing screen
[ 307]    0553: B0 01                                 		mov al,01h
[ 308]    0555: E6 12                                 		out port2b,al
[ 309]    0557: B0 01                                 		mov al,01h
[ 310]    0559: E6 14                                 		out port2c,al
[ 311]    055B: B0 00                                 		mov al,00h
[ 312]    055D: E6 14                                 		out port2c,al
[ 313]    055F: E8 E1 FF                              		call delay_20ms
[ 314]        :                                       		
[ 315]        :                                       		
[ 316]        :                                       		;checking if 24hr or 12hr
[ 317]    0562: A0 67 0F                              		mov al,format_check
[ 318]    0565: 3C 01                                 		cmp al,1
[ 319]    0567: 75 3F                                 		jne hr12				
[ 320]        :                                       		
[ 321]        :                                       		;display the 24 hr format time
[ 322]        :                                       		
[ 323]    0569: B9 00 00                              		mov cx,0	
[ 324]    056C: A0 61 0F                              		mov al,hour
[ 325]        :                                       		
[ 326]    056F: 8A D8                                 		mov       bl,al
[ 327]    0571: B0 00                                 	    mov       al,0          ; converting hex to dec value
[ 328]    0573: 04 01                                 x1:		add       al,01
[ 329]    0575: 27                                    	    daa
[ 330]    0576: FE CB                                 	    dec       bl
[ 331]    0578: 75 F9                                 	    jnz       x1
[ 332]        :                                       				
[ 333]    057A: A2 65 0F                              mov digit,al			
[ 334]        :                                       								
[ 335]    057D: 24 F0                                 		and al,0f0h				
[ 336]    057F: B1 04                                 		mov cl,4
[ 337]    0581: D2 C0                                 		rol al,cl
[ 338]    0583: 04 30                                 		add al,30h				
[ 339]        :                                       		
[ 340]    0585: E6 12                                 		out port2b,al			
[ 341]    0587: B0 11                                 		mov al,11h
[ 342]    0589: E6 14                                 		out port2c,al
[ 343]    058B: B0 10                                 		mov al,10h
[ 344]    058D: E6 14                                 		out port2c,al
[ 345]    058F: E8 B1 FF                              		call delay_20ms
[ 346]        :                                       						
[ 347]        :                                       						
[ 348]    0592: A0 65 0F                              		mov al,digit			
[ 349]    0595: 24 0F                                 		and al,0fh
[ 350]    0597: 04 30                                 		add al,30h				
[ 351]        :                                       						
[ 352]    0599: E6 12                                 		out port2b,al			
[ 353]    059B: B0 11                                 		mov al,11h
[ 354]    059D: E6 14                                 		out port2c,al
[ 355]    059F: B0 10                                 		mov al,10h
[ 356]    05A1: E6 14                                 		out port2c,al
[ 357]    05A3: E8 9D FF                              		call delay_20ms
[ 358]        :                                       
[ 359]        :                                       		; displaying time in 24 hour format completed
[ 360]        :                                       				
[ 361]    05A6: EB 77                                 		jmp skip
[ 362]        :                                       		
[ 363]        :                                       	;	displaying 12 hour format
[ 364]        :                                       	
[ 365]    05A8: A0 61 0F                              hr12:mov al,hour
[ 366]    05AB: 3C 00                                 	cmp al,00					
[ 367]    05AD: 75 0C                                 	jne a1						
[ 368]    05AF: C6 06 68 0F 0C                        	mov hour_12,12
[ 369]    05B4: C6 06 69 0F 00                        	mov phase,0
[ 370]    05B9: EB 2A                                 	jmp exit					
[ 371]        :                                       
[ 372]    05BB: 3C 0C                                 a1:	cmp al,12					;12pm
[ 373]    05BD: 75 0C                                 	jne a2
[ 374]    05BF: C6 06 68 0F 0C                        	mov hour_12,12
[ 375]    05C4: C6 06 69 0F 01                        	mov phase,1
[ 376]    05C9: EB 1A                                 	jmp exit
[ 377]        :                                       
[ 378]    05CB: 3C 0C                                 a2:	cmp al,12					;am
[ 379]    05CD: 77 0A                                 	ja a3
[ 380]    05CF: A2 68 0F                              	mov hour_12,al
[ 381]    05D2: C6 06 69 0F 00                        	mov phase,0
[ 382]    05D7: EB 0C                                 	jmp exit
[ 383]        :                                       
[ 384]    05D9: B3 0C                                 a3:	mov bl,12					;Subtract 12, pm
[ 385]    05DB: 2A C3                                 	sub al,bl
[ 386]    05DD: A2 68 0F                              	mov hour_12,al	
[ 387]    05E0: C6 06 69 0F 01                        	mov phase,1
[ 388]        :                                       	
[ 389]    05E5: A0 68 0F                              exit:	mov al,hour_12
[ 390]    05E8: 8A D8                                 		mov       bl,al
[ 391]    05EA: B0 00                                 	    mov       al,0          ; converting hex to dec value
[ 392]    05EC: 04 01                                 x2:		add       al,01
[ 393]    05EE: 27                                    	    daa
[ 394]    05EF: FE CB                                 	    dec       bl
[ 395]    05F1: 75 F9                                 	    jnz       x2
[ 396]    05F3: A2 65 0F                              		mov digit,al			
[ 397]        :                                       		
[ 398]    05F6: 24 F0                                 		and al,0f0h				
[ 399]    05F8: B1 04                                 		mov cl,4
[ 400]    05FA: D2 C0                                 		rol al,cl
[ 401]    05FC: 04 30                                 		add al,30h
[ 402]        :                                       		
[ 403]    05FE: E6 12                                 		out port2b,al			
[ 404]    0600: B0 11                                 		mov al,11h
[ 405]    0602: E6 14                                 		out port2c,al
[ 406]    0604: B0 10                                 		mov al,10h
[ 407]    0606: E6 14                                 		out port2c,al
[ 408]    0608: E8 38 FF                              		call delay_20ms
[ 409]        :                                       		
[ 410]    060B: A0 65 0F                              		mov al,digit			
[ 411]    060E: 24 0F                                 		and al,0fh
[ 412]    0610: 04 30                                 		add al,30h
[ 413]        :                                       		
[ 414]    0612: E6 12                                 		out port2b,al			
[ 415]    0614: B0 11                                 		mov al,11h
[ 416]    0616: E6 14                                 		out port2c,al
[ 417]    0618: B0 10                                 		mov al,10h
[ 418]    061A: E6 14                                 		out port2c,al
[ 419]    061C: E8 24 FF                              		call delay_20ms
[ 420]        :                                       	;display_hour_12 completed
[ 421]        :                                       		
[ 422]        :                                       	;displaying ':'
[ 423]    061F: B0 3A                                 skip:		mov al,3ah		;Ascii value of ':' is 3a
[ 424]    0621: E6 12                                 		out port2b,al		; displaying ':'
[ 425]    0623: B0 11                                 		mov al,11h
[ 426]    0625: E6 14                                 		out port2c,al
[ 427]    0627: B0 10                                 		mov al,10h
[ 428]    0629: E6 14                                 		out port2c,al
[ 429]    062B: E8 15 FF                              		call delay_20ms
[ 430]        :                                       		
[ 431]        :                                       							
[ 432]        :                                       		;displaying min
[ 433]    062E: B9 00 00                              		mov cx,0
[ 434]    0631: A0 60 0F                              		mov al,min
[ 435]    0634: 8A D8                                 		mov       bl,al
[ 436]    0636: B0 00                                 	    mov       al,0          ; converting hex to dec value
[ 437]    0638: 04 01                                 x3:		add       al,01
[ 438]    063A: 27                                    	    daa
[ 439]    063B: FE CB                                 	    dec       bl
[ 440]    063D: 75 F9                                 	    jnz       x3
[ 441]    063F: A2 65 0F                              		mov digit,al
[ 442]        :                                       								
[ 443]    0642: 24 F0                                 		and al,0f0h
[ 444]    0644: B1 04                                 		mov cl,4
[ 445]    0646: D2 C0                                 		rol al,cl
[ 446]    0648: 04 30                                 		add al,30h
[ 447]        :                                       								
[ 448]    064A: E6 12                                 		out port2b,al
[ 449]    064C: B0 11                                 		mov al,11h
[ 450]    064E: E6 14                                 		out port2c,al
[ 451]    0650: B0 10                                 		mov al,10h
[ 452]    0652: E6 14                                 		out port2c,al
[ 453]    0654: E8 EC FE                              		call delay_20ms
[ 454]        :                                       								
[ 455]    0657: A0 65 0F                              		mov al,digit
[ 456]    065A: 24 0F                                 		and al,0fh
[ 457]    065C: 04 30                                 		add al,30h
[ 458]        :                                       								
[ 459]    065E: E6 12                                 		out port2b,al
[ 460]    0660: B0 11                                 		mov al,11h
[ 461]    0662: E6 14                                 		out port2c,al
[ 462]    0664: B0 10                                 		mov al,10h
[ 463]    0666: E6 14                                 		out port2c,al
[ 464]    0668: E8 D8 FE                              		call delay_20ms
[ 465]        :                                       		;display min completed
[ 466]        :                                       		
[ 467]        :                                       		;displaying ':'
[ 468]    066B: B0 3A                                 		mov al,3ah
[ 469]    066D: E6 12                                 		out port2b,al
[ 470]    066F: B0 11                                 		mov al,11h
[ 471]    0671: E6 14                                 		out port2c,al
[ 472]    0673: B0 10                                 		mov al,10h
[ 473]    0675: E6 14                                 		out port2c,al
[ 474]    0677: E8 C9 FE                              		call delay_20ms
[ 475]        :                                       		
[ 476]        :                                       		;display sec
[ 477]        :                                       		
[ 478]    067A: A0 5F 0F                              		mov al,second
[ 479]    067D: 8A D8                                 		mov       bl,al
[ 480]    067F: B0 00                                 	    mov       al,0          ; converting hex to dec value
[ 481]    0681: 04 01                                 x4:		add       al,01
[ 482]    0683: 27                                    	    daa
[ 483]    0684: FE CB                                 	    dec       bl
[ 484]    0686: 75 F9                                 	    jnz       x4
[ 485]    0688: A2 65 0F                              		mov digit,al
[ 486]        :                                       								
[ 487]    068B: 24 F0                                 		and al,0f0h
[ 488]    068D: B1 04                                 		mov cl,4
[ 489]    068F: D2 C0                                 		rol al,cl
[ 490]    0691: 04 30                                 		add al,30h
[ 491]        :                                       								
[ 492]    0693: E6 12                                 		out port2b,al
[ 493]    0695: B0 11                                 		mov al,11h
[ 494]    0697: E6 14                                 		out port2c,al
[ 495]    0699: B0 10                                 		mov al,10h
[ 496]    069B: E6 14                                 		out port2c,al
[ 497]    069D: E8 A3 FE                              		call delay_20ms
[ 498]        :                                       								
[ 499]    06A0: A0 65 0F                              		mov al,digit
[ 500]    06A3: 24 0F                                 		and al,0fh
[ 501]    06A5: 04 30                                 		add al,30h
[ 502]        :                                       								
[ 503]    06A7: E6 12                                 		out port2b,al
[ 504]    06A9: B0 11                                 		mov al,11h
[ 505]    06AB: E6 14                                 		out port2c,al
[ 506]    06AD: B0 10                                 		mov al,10h
[ 507]    06AF: E6 14                                 		out port2c,al
[ 508]    06B1: E8 8F FE                              		call delay_20ms
[ 509]        :                                       		;display_sec completed
[ 510]        :                                       		
[ 511]        :                                       	;Checking for format again
[ 512]    06B4: A0 67 0F                              		mov al,format_check			
[ 513]    06B7: 3C 01                                 		cmp al,1				
[ 514]    06B9: 74 51                                 		je skip2
[ 515]        :                                       		
[ 516]        :                                       		;space
[ 517]    06BB: B0 20                                 		mov al,20h
[ 518]    06BD: E6 12                                 		out port2b, al
[ 519]    06BF: B0 11                                 		mov al,11h
[ 520]    06C1: E6 14                                 		out port2c,al
[ 521]    06C3: B0 10                                 		mov al,10h
[ 522]    06C5: E6 14                                 		out port2c,al
[ 523]        :                                       		
[ 524]        :                                       								;checking am or pm			
[ 525]    06C7: A0 69 0F                              		mov al,phase
[ 526]    06CA: 3C 01                                 		cmp al,1
[ 527]    06CC: 74 20                                 		je pm1
[ 528]        :                                       	
[ 529]        :                                       		;Displaying 'am'
[ 530]    06CE: B0 41                                 		mov al,41h
[ 531]    06D0: E6 12                                 		out port2b, al
[ 532]    06D2: B0 11                                 		mov al,11h
[ 533]    06D4: E6 14                                 		out port2c,al
[ 534]    06D6: B0 10                                 		mov al,10h
[ 535]    06D8: E6 14                                 		out port2c,al
[ 536]    06DA: E8 66 FE                              		call delay_20ms
[ 537]        :                                       		
[ 538]    06DD: B0 4D                                 		mov al,4dh
[ 539]    06DF: E6 12                                 		out port2b,al
[ 540]    06E1: B0 11                                 		mov al,11h
[ 541]    06E3: E6 14                                 		out port2c,al
[ 542]    06E5: B0 10                                 		mov al,10h
[ 543]    06E7: E6 14                                 		out port2c,al
[ 544]    06E9: E8 57 FE                              		call delay_20ms
[ 545]    06EC: EB 1E                                 		jmp skip2
[ 546]        :                                       		
[ 547]        :                                       		;Displaying 'pm'
[ 548]        :                                       
[ 549]    06EE:                                       pm1:
[ 550]    06EE: B0 50                                 		mov al,50h
[ 551]    06F0: E6 12                                 		out port2b, al
[ 552]    06F2: B0 11                                 		mov al,11h
[ 553]    06F4: E6 14                                 		out port2c,al
[ 554]    06F6: B0 10                                 		mov al,10h
[ 555]    06F8: E6 14                                 		out port2c,al
[ 556]    06FA: E8 46 FE                              		call delay_20ms
[ 557]        :                                       		
[ 558]    06FD: B0 4D                                 		mov al,4Dh
[ 559]    06FF: E6 12                                 		out port2b, al
[ 560]    0701: B0 11                                 		mov al,11h
[ 561]    0703: E6 14                                 		out port2c,al
[ 562]    0705: B0 10                                 		mov al,10h
[ 563]    0707: E6 14                                 		out port2c,al
[ 564]    0709: E8 37 FE                              		call delay_20ms
[ 565]        :                                       
[ 566]        :                                       		
[ 567]    070C:                                       skip2:	
[ 568]        :                                       		;next line, 6th position
[ 569]        :                                       
[ 570]    070C: B0 C6                                 		mov al,0C6h
[ 571]    070E: E6 12                                 		out port2b,al
[ 572]    0710: B0 01                                 		mov al,01h
[ 573]    0712: E6 14                                 		out port2c,al
[ 574]    0714: B0 00                                 		mov al,00h
[ 575]    0716: E6 14                                 		out port2c,al
[ 576]    0718: E8 28 FE                              		call delay_20ms
[ 577]        :                                       		
[ 578]        :                                       		;Displaying date
[ 579]        :                                       		
[ 580]    071B: A0 62 0F                              		mov al,day
[ 581]    071E: 8A D8                                 		mov       bl,al
[ 582]    0720: B0 00                                 	    mov       al,0
[ 583]    0722: 04 01                                 x5:		add       al,01
[ 584]    0724: 27                                    	    daa
[ 585]    0725: FE CB                                 	    dec       bl
[ 586]    0727: 75 F9                                 	    jnz       x5
[ 587]    0729: A2 65 0F                              		mov digit,al
[ 588]        :                                       							
[ 589]    072C: 24 F0                                 		and al,0f0h
[ 590]    072E: B1 04                                 		mov cl,4
[ 591]    0730: D2 C0                                 		rol al,cl
[ 592]    0732: 04 30                                 		add al,30h
[ 593]        :                                       							
[ 594]    0734: E6 12                                 		out port2b,al
[ 595]    0736: B0 11                                 		mov al,11h
[ 596]    0738: E6 14                                 		out port2c,al
[ 597]    073A: B0 10                                 		mov al,10h
[ 598]    073C: E6 14                                 		out port2c,al
[ 599]    073E: E8 02 FE                              		call delay_20ms
[ 600]        :                                       							
[ 601]    0741: A0 65 0F                              		mov al,digit
[ 602]    0744: 24 0F                                 		and al,0fh
[ 603]    0746: 04 30                                 		add al,30h
[ 604]        :                                       							
[ 605]    0748: E6 12                                 		out port2b,al
[ 606]    074A: B0 11                                 		mov al,11h
[ 607]    074C: E6 14                                 		out port2c,al
[ 608]    074E: B0 10                                 		mov al,10h
[ 609]    0750: E6 14                                 		out port2c,al
[ 610]    0752: E8 EE FD                              		call delay_20ms
[ 611]        :                                       		;display_day completed
[ 612]        :                                       		
[ 613]        :                                       		;displaying '/'
[ 614]    0755: B0 2F                                 		mov al,2fh
[ 615]    0757: E6 12                                 		out port2b,al
[ 616]    0759: B0 11                                 		mov al,11h
[ 617]    075B: E6 14                                 		out port2c,al
[ 618]    075D: B0 10                                 		mov al,10h
[ 619]    075F: E6 14                                 		out port2c,al
[ 620]    0761: E8 DF FD                              		call delay_20ms
[ 621]        :                                       		
[ 622]        :                                       		;display month
[ 623]        :                                       		
[ 624]    0764: A0 63 0F                              		mov al,month
[ 625]    0767: 8A D8                                 		mov       bl,al
[ 626]    0769: B0 00                                 	    mov       al,0          ; converting hex to dec value
[ 627]    076B: 04 01                                 x6:		add       al,01
[ 628]    076D: 27                                    	    daa
[ 629]    076E: FE CB                                 	    dec       bl
[ 630]    0770: 75 F9                                 	    jnz       x6
[ 631]    0772: A2 65 0F                              		mov digit,al
[ 632]        :                                       			
[ 633]    0775: 24 F0                                 		and al,0f0h			
[ 634]    0777: B1 04                                 		mov cl,4
[ 635]    0779: D2 C0                                 		rol al,cl
[ 636]    077B: 04 30                                 		add al,30h
[ 637]        :                                       		
[ 638]    077D: E6 12                                 		out port2b,al		
[ 639]    077F: B0 11                                 		mov al,11h
[ 640]    0781: E6 14                                 		out port2c,al
[ 641]    0783: B0 10                                 		mov al,10h
[ 642]    0785: E6 14                                 		out port2c,al
[ 643]    0787: E8 B9 FD                              		call delay_20ms
[ 644]        :                                       		
[ 645]    078A: A0 65 0F                              		mov al,digit		
[ 646]    078D: 24 0F                                 		and al,0fh
[ 647]    078F: 04 30                                 		add al,30h
[ 648]        :                                       		
[ 649]    0791: E6 12                                 		out port2b,al		
[ 650]    0793: B0 11                                 		mov al,11h
[ 651]    0795: E6 14                                 		out port2c,al
[ 652]    0797: B0 10                                 		mov al,10h
[ 653]    0799: E6 14                                 		out port2c,al
[ 654]    079B: E8 A5 FD                              		call delay_20ms
[ 655]        :                                       		;display_month completed
[ 656]        :                                       		
[ 657]        :                                       		;displaying '/'
[ 658]    079E: B0 2F                                 		mov al,2fh
[ 659]    07A0: E6 12                                 		out port2b,al
[ 660]    07A2: B0 11                                 		mov al,11h
[ 661]    07A4: E6 14                                 		out port2c,al
[ 662]    07A6: B0 10                                 		mov al,10h
[ 663]    07A8: E6 14                                 		out port2c,al
[ 664]    07AA: E8 96 FD                              		call delay_20ms
[ 665]        :                                       		
[ 666]        :                                       		;display year
[ 667]        :                                       		 		
[ 668]        :                                       		
[ 669]        :                                       		;display 2
[ 670]    07AD: B0 32                                 		mov al,32h
[ 671]    07AF: E6 12                                 		out port2b,al
[ 672]    07B1: B0 11                                 		mov al,11h
[ 673]    07B3: E6 14                                 		out port2c,al
[ 674]    07B5: B0 10                                 		mov al,10h
[ 675]    07B7: E6 14                                 		out port2c,al
[ 676]    07B9: E8 87 FD                              		call delay_20ms
[ 677]        :                                       		
[ 678]        :                                       		;display 0
[ 679]    07BC: B0 30                                 		mov al,30h
[ 680]    07BE: E6 12                                 		out port2b,al
[ 681]    07C0: B0 11                                 		mov al,11h
[ 682]    07C2: E6 14                                 		out port2c,al
[ 683]    07C4: B0 10                                 		mov al,10h
[ 684]    07C6: E6 14                                 		out port2c,al
[ 685]    07C8: E8 78 FD                              		call delay_20ms
[ 686]        :                                       		
[ 687]        :                                       		
[ 688]        :                                       		;display year_last 2 digits
[ 689]        :                                       		
[ 690]    07CB: A0 64 0F                              		mov al,year
[ 691]    07CE: 8A D8                                 		mov       bl,al
[ 692]    07D0: B0 00                                 	    mov       al,0          ; converting hex to dec value
[ 693]    07D2: 04 01                                 x7:		add       al,01
[ 694]    07D4: 27                                    	    daa
[ 695]    07D5: FE CB                                 	    dec       bl
[ 696]    07D7: 75 F9                                 	    jnz       x7
[ 697]    07D9: A2 65 0F                              		mov digit,al
[ 698]        :                                       						
[ 699]    07DC: 24 F0                                 		and al,0f0h			
[ 700]    07DE: B1 04                                 		mov cl,4
[ 701]    07E0: D2 C0                                 		rol al,cl
[ 702]    07E2: 04 30                                 		add al,30h
[ 703]        :                                       							
[ 704]    07E4: E6 12                                 		out port2b,al
[ 705]    07E6: B0 11                                 		mov al,11h
[ 706]    07E8: E6 14                                 		out port2c,al
[ 707]    07EA: B0 10                                 		mov al,10h
[ 708]    07EC: E6 14                                 		out port2c,al
[ 709]    07EE: E8 52 FD                              		call delay_20ms
[ 710]        :                                       							
[ 711]    07F1: A0 65 0F                              		mov al,digit
[ 712]    07F4: 24 0F                                 		and al,0fh
[ 713]    07F6: 04 30                                 		add al,30h
[ 714]        :                                       							
[ 715]    07F8: E6 12                                 		out port2b,al
[ 716]    07FA: B0 11                                 		mov al,11h
[ 717]    07FC: E6 14                                 		out port2c,al
[ 718]    07FE: B0 10                                 		mov al,10h
[ 719]    0800: E6 14                                 		out port2c,al
[ 720]    0802: E8 3E FD                              		call delay_20ms
[ 721]        :                                       		
[ 722]        :                                       		;display_year completed
[ 723]        :                                       		
[ 724]        :                                       		
[ 725]        :                                       		
[ 726]        :                                       		
[ 727]        :                                       		
[ 728]        :                                       		
[ 729]    0805: C3                                    		ret
[ 730]        :                                       	display endp				;Display procedure ends here
[ 731]        :                                       	
[ 732]        :                                       	
[ 733]        :                                       	
[ 734]        :                                       	;procedure to set hour
[ 735]    0806:                                       set_hour proc near
[ 736]    0806: E8 43 FD                              call display
[ 737]        :                                       	
[ 738]    0809:                                       sh1:	
[ 739]    0809: E4 04                                 	in al,port1c
[ 740]    080B: 3C 80                                 	cmp al,80h			
[ 741]    080D: 74 03 E9 E9 00                        	jnz sh2						; if set hour is not high then ret		
[ 742]        :                                       	
[ 743]        :                                       	
[ 744]    0812: E4 00                                 	in al,port1a			;Check format
[ 745]    0814: 24 01                                 		and al,01h		
[ 746]    0816: 8A 1E 67 0F                           		mov bl,format_check	
[ 747]    081A: 3A C3                                 		cmp al,bl
[ 748]    081C: 74 03                                 		je n1		
[ 749]    081E: E8 2B FD                              		call display		;display if format changed
[ 750]    0821:                                       n1:   		
[ 751]    0821: E4 04                                 		in al,port1c		;check set_hour  debounce
[ 752]    0823: 3C 80                                 		cmp al,80h		
[ 753]    0825: 74 03 E9 D1 00                        		jne sh2			
[ 754]    082A: E4 00                                 		in al,port1a		
[ 755]    082C: 24 01                                 		and al,01h
[ 756]    082E: 8A 1E 67 0F                           		mov bl,format_check
[ 757]    0832: 3A C3                                 		cmp al,bl				
[ 758]    0834: 74 03                                 		je n2			
[ 759]    0836: E8 13 FD                              		call display
[ 760]        :                                       
[ 761]    0839: E4 02                                 n2:	    in al,port1b			;debounce for inc/dec
[ 762]    083B: 3C 00                                 	cmp al,00
[ 763]    083D: 74 E2                                 	je n1
[ 764]    083F: 8A D8                                 	mov bl,al
[ 765]    0841: E8 FF FC                              	call delay_20ms
[ 766]    0844: E4 02                                 	in al,port1b
[ 767]    0846: 3A C3                                 	cmp al,bl
[ 768]    0848: 75 D7                                 	jne n1
[ 769]        :                                       	
[ 770]    084A: E4 02                                 	in al,port1b
[ 771]    084C: 3C 01                                 	cmp al,01h					
[ 772]    084E: 75 52                                 	jnz sh3							
[ 773]    0850: 8A 1E 61 0F                           	mov bl,hour			
[ 774]    0854: FE CB                                 	dec bl			
[ 775]    0856: 80 FB 00                              	cmp bl,00 			
[ 776]    0859: 7D 02                                 	jge sh5				
[ 777]        :                                       	
[ 778]        :                                       	
[ 779]    085B: B3 17                                 	    mov bl,23			;If the hour value goes lower than 0 make it 23
[ 780]    085D:                                       sh5:	
[ 781]    085D: 88 1E 61 0F                           	    mov hour,bl			
[ 782]    0861: A0 61 0F                              		mov al,hour			
[ 783]    0864: 3C 00                                 		cmp al,00		;12 AM
[ 784]    0866: 75 0C                                 		jne shr01
[ 785]    0868: C6 06 68 0F 0C                        		mov hour_12 , 12	
[ 786]    086D: C6 06 69 0F 00                        		mov phase,0
[ 787]    0872: EB 28                                 		jmp exit1		
[ 788]    0874:                                       shr01:		
[ 789]    0874: 3C 0C                                 		cmp al,12		
[ 790]    0876: 75 0C                                 		jne shr04		;12 PM
[ 791]    0878: C6 06 68 0F 0C                        		mov hour_12,12
[ 792]    087D: C6 06 69 0F 01                        		mov phase,1
[ 793]    0882: EB 18                                 		jmp exit1
[ 794]    0884:                                       shr04:		
[ 795]    0884: 3C 0C                                 		cmp al,12		;am
[ 796]    0886: 77 0A                                 		ja shr02
[ 797]    0888: A2 68 0F                              		mov hour_12,al
[ 798]    088B: C6 06 69 0F 00                        		mov phase,0
[ 799]    0890: EB 0A                                 		jmp exit1
[ 800]    0892:                                       shr02:		
[ 801]    0892: 2C 0C                                 		sub al,12
[ 802]    0894: A2 68 0F                              		mov hour_12,al	
[ 803]    0897: C6 06 69 0F 01                        		mov phase,1
[ 804]        :                                       						; display
[ 805]    089C: E8 AD FC                              exit1:	call display			
[ 806]    089F: E9 67 FF                              		jmp sh1			;check again
[ 807]    08A2:                                       sh3:		
[ 808]        :                                       		;To check increment
[ 809]    08A2: 3C 02                                 		cmp al,02h		
[ 810]    08A4: 74 03 E9 60 FF                        		jne sh1			
[ 811]    08A9: 8A 1E 61 0F                           		mov bl,hour		
[ 812]    08AD: FE C3                                 		inc bl
[ 813]    08AF: 80 FB 18                              		cmp bl,24			
[ 814]    08B2: 72 02                                 		jb sh6
[ 815]    08B4: B3 00                                 		mov bl,00		
[ 816]    08B6: 88 1E 61 0F                           sh6:	mov hour,bl
[ 817]        :                                       						;setting hour_12
[ 818]    08BA: A0 61 0F                              		mov al,hour
[ 819]    08BD: 3C 00                                 		cmp al,00
[ 820]    08BF: 75 B3                                 		jne shr01
[ 821]    08C1: C6 06 68 0F 0C                        		mov hour_12 , 12
[ 822]    08C6: C6 06 69 0F 00                        		mov phase,0
[ 823]    08CB: EB 28                                 		jmp exit2
[ 824]    08CD: 3C 0C                                 shr11:		cmp al,12
[ 825]    08CF: 75 B3                                 		jne shr04
[ 826]    08D1: C6 06 68 0F 0C                        		mov hour_12,12
[ 827]    08D6: C6 06 69 0F 01                        		mov phase,1
[ 828]    08DB: EB 18                                 		jmp exit2
[ 829]    08DD: 3C 0C                                 shr14:		cmp al,12
[ 830]    08DF: 77 B1                                 		ja shr02
[ 831]    08E1: A2 68 0F                              		mov hour_12,al
[ 832]    08E4: C6 06 69 0F 00                        		mov phase,0
[ 833]    08E9: EB 0A                                 		jmp exit2
[ 834]    08EB: 2C 0C                                 shr12:		sub al,12
[ 835]    08ED: A2 68 0F                              		mov hour_12,al	
[ 836]    08F0: C6 06 69 0F 01                        		mov phase,1
[ 837]        :                                       						;incrementing hour done 					
[ 838]    08F5: E8 54 FC                              exit2:	call display
[ 839]    08F8: E9 0E FF                              		jmp sh1
[ 840]    08FB: C3                                    sh2:		ret			;End of set_hour
[ 841]        :                                       
[ 842]        :                                       set_hour endp
[ 843]        :                                       
[ 844]        :                                       						;set_month
[ 845]    08FC:                                       set_month proc near
[ 846]    08FC: E8 4D FC                              call display
[ 847]    08FF: E4 04                                 mon1:	in al,port1c
[ 848]    0901: 3C 08                                 	cmp al,08h
[ 849]    0903: 75 6B                                 	jne mon2
[ 850]    0905: E4 00                                 	in al,port1a			;Check format
[ 851]    0907: 24 01                                 		and al,01h		
[ 852]    0909: 8A 1E 67 0F                           		mov bl,format_check	
[ 853]    090D: 3A C3                                 		cmp al,bl
[ 854]    090F: 74 03                                 		je n3		
[ 855]    0911: E8 38 FC                              		call display		;display if format changed
[ 856]    0914:                                       n3:   		
[ 857]    0914: E4 04                                 		in al,port1c		;check set_month  debounce
[ 858]    0916: 3C 08                                 		cmp al,08h		
[ 859]    0918: 75 56                                 		jne mon2			
[ 860]    091A: E4 00                                 		in al,port1a		
[ 861]    091C: 24 01                                 		and al,01h
[ 862]    091E: 8A 1E 67 0F                           		mov bl,format_check
[ 863]    0922: 3A C3                                 		cmp al,bl				
[ 864]    0924: 74 03                                 		je n4			
[ 865]    0926: E8 23 FC                              		call display
[ 866]        :                                       
[ 867]    0929: E4 02                                 n4:	    in al,port1b			;debounce for inc/dec
[ 868]    092B: 3C 00                                 	cmp al,00
[ 869]    092D: 74 E5                                 	je n3
[ 870]    092F: 8A D8                                 	mov bl,al
[ 871]    0931: E8 0F FC                              	call delay_20ms
[ 872]    0934: E4 02                                 	in al,port1b
[ 873]    0936: 3A C3                                 	cmp al,bl
[ 874]    0938: 75 DA                                 	jne n3
[ 875]        :                                       			
[ 876]    093A: E4 02                                 	in al,port1b
[ 877]    093C: 3C 01                                 	cmp al,01h
[ 878]    093E: 75 16                                 	jne mon3
[ 879]    0940: 8A 1E 63 0F                           	mov bl,month
[ 880]    0944: FE CB                                 	dec bl
[ 881]    0946: 80 FB 00                              	cmp bl,0
[ 882]    0949: 75 02                                 	jne mon4
[ 883]    094B: B3 0C                                 	mov bl,12
[ 884]    094D: 88 1E 63 0F                           mon4:	mov month,bl			;Decrement
[ 885]    0951: E8 F8 FB                              	call display
[ 886]    0954: EB A9                                 	jmp mon1
[ 887]    0956: 3C 02                                 mon3:	cmp al,02h
[ 888]    0958: 75 A5                                 	jne mon1
[ 889]    095A: 8A 1E 63 0F                           	mov bl,month				;Increment
[ 890]    095E: FE C3                                 	inc bl
[ 891]    0960: 80 FB 0D                              	cmp bl,13
[ 892]    0963: 75 02                                 	jne mon5
[ 893]    0965: B3 01                                 	mov bl,1
[ 894]    0967: 88 1E 63 0F                           mon5:	mov month,bl
[ 895]    096B: E8 DE FB                              	call display
[ 896]    096E: EB 8F                                 	jmp mon1
[ 897]    0970: C3                                    mon2:	ret
[ 898]        :                                       set_month endp
[ 899]        :                                       
[ 900]        :                                       						
[ 901]        :                                       									;set_minute function starts			
[ 902]    0971:                                       set_minute proc near
[ 903]        :                                       
[ 904]    0971: E8 D8 FB                              call display
[ 905]        :                                       
[ 906]    0974: E4 04                                 m1:	in al,port1c			
[ 907]    0976: 3C 40                                 	cmp al,40h
[ 908]    0978: 75 6C                                 	jnz m2
[ 909]        :                                       	
[ 910]    097A: E4 00                                 	in al,port1a			;Check format
[ 911]    097C: 24 01                                 		and al,01h		
[ 912]    097E: 8A 1E 67 0F                           		mov bl,format_check	
[ 913]    0982: 3A C3                                 		cmp al,bl
[ 914]    0984: 74 03                                 		je n5		
[ 915]    0986: E8 C3 FB                              		call display		;display if format changed
[ 916]    0989:                                       n5:   		
[ 917]    0989: E4 04                                 		in al,port1c		;check set_minute  debounce
[ 918]    098B: 3C 40                                 		cmp al,40h		
[ 919]    098D: 75 57                                 		jne m2			
[ 920]    098F: E4 00                                 		in al,port1a		
[ 921]    0991: 24 01                                 		and al,01h
[ 922]    0993: 8A 1E 67 0F                           		mov bl,format_check
[ 923]    0997: 3A C3                                 		cmp al,bl				
[ 924]    0999: 74 03                                 		je n6			
[ 925]    099B: E8 AE FB                              		call display
[ 926]        :                                       
[ 927]    099E: E4 02                                 n6:	    in al,port1b			;debounce for inc/dec
[ 928]    09A0: 3C 00                                 	cmp al,00
[ 929]    09A2: 74 E5                                 	je n5
[ 930]    09A4: 8A D8                                 	mov bl,al
[ 931]    09A6: E8 9A FB                              	call delay_20ms
[ 932]    09A9: E4 02                                 	in al,port1b
[ 933]    09AB: 3A C3                                 	cmp al,bl
[ 934]    09AD: 75 DA                                 	jne n5
[ 935]        :                                       	
[ 936]        :                                       	 		
[ 937]    09AF: E4 02                                 	in al,port1b			
[ 938]    09B1: 3C 01                                 	cmp al,01h			
[ 939]    09B3: 75 17                                 	jnz m3
[ 940]    09B5: 8A 1E 60 0F                           	mov bl,min			;Decrement
[ 941]    09B9: 80 FB 00                              	cmp bl,0			
[ 942]    09BC: 75 03                                 	jnz m4				
[ 943]    09BE: 80 C3 3C                              	add bl,60
[ 944]    09C1: FE CB                                 m4:	dec bl
[ 945]    09C3: 88 1E 60 0F                           	mov min,bl
[ 946]    09C7: E8 82 FB                              	call display
[ 947]    09CA: EB A8                                 	jmp m1
[ 948]        :                                       	
[ 949]    09CC: 3C 02                                 m3:	cmp al,02h
[ 950]    09CE: 75 A4                                 	jnz m1				;Increment
[ 951]    09D0: 8A 1E 60 0F                           	mov bl,min
[ 952]    09D4: FE C3                                 	inc bl
[ 953]    09D6: 80 FB 3C                              	cmp bl,60
[ 954]    09D9: 75 02                                 	jnz m5
[ 955]    09DB: B3 00                                 	mov bl,0
[ 956]    09DD: 88 1E 60 0F                           m5:	mov min,bl
[ 957]    09E1: E8 68 FB                              	call display
[ 958]    09E4: EB 8E                                 	jmp m1
[ 959]    09E6: C3                                    m2:	ret
[ 960]        :                                       set_minute endp			
[ 961]        :                                       
[ 962]        :                                       						;set_date
[ 963]    09E7:                                       set_date proc near
[ 964]    09E7: E8 62 FB                              call display
[ 965]    09EA: E4 04                                 da1:	in al,port1c
[ 966]    09EC: 3C 10                                 	cmp al,10h
[ 967]    09EE: 75 6E                                 	jne da2
[ 968]        :                                       	
[ 969]    09F0: E4 00                                 	    in al,port1a			;Check format
[ 970]    09F2: 24 01                                 		and al,01h		
[ 971]    09F4: 8A 1E 67 0F                           		mov bl,format_check	
[ 972]    09F8: 3A C3                                 		cmp al,bl
[ 973]    09FA: 74 03                                 		je n7		
[ 974]    09FC: E8 4D FB                              		call display		;display if format changed
[ 975]    09FF:                                       n7:   		
[ 976]    09FF: E4 04                                 		in al,port1c		;check set_date  debounce
[ 977]    0A01: 3C 10                                 		cmp al,10h		
[ 978]    0A03: 75 59                                 		jne da2			
[ 979]    0A05: E4 00                                 		in al,port1a		
[ 980]    0A07: 24 01                                 		and al,01h
[ 981]    0A09: 8A 1E 67 0F                           		mov bl,format_check
[ 982]    0A0D: 3A C3                                 		cmp al,bl				
[ 983]    0A0F: 74 03                                 		je n8			
[ 984]    0A11: E8 38 FB                              		call display
[ 985]        :                                       
[ 986]    0A14: E4 02                                 n8:	    in al,port1b			;debounce for inc/dec
[ 987]    0A16: 3C 00                                 	cmp al,00
[ 988]    0A18: 74 E5                                 	je n7
[ 989]    0A1A: 8A D8                                 	mov bl,al
[ 990]    0A1C: E8 24 FB                              	call delay_20ms
[ 991]    0A1F: E4 02                                 	in al,port1b
[ 992]    0A21: 3A C3                                 	cmp al,bl
[ 993]    0A23: 75 DA                                 	jne n7 		
[ 994]        :                                       	
[ 995]    0A25: E4 02                                 	in al,port1b
[ 996]    0A27: 3C 01                                 	cmp al,01h
[ 997]    0A29: 75 18                                 	jne da3
[ 998]        :                                       	
[ 999]    0A2B: 8A 1E 62 0F                           	mov bl,day
[1000]    0A2F: FE CB                                 	dec bl
[1001]    0A31: 80 FB 00                              	cmp bl,0
[1002]    0A34: 75 04                                 	jne da4
[1003]    0A36: 8A 1E 5D 0F                           	mov bl,count_day
[1004]    0A3A:                                       da4:	
[1005]    0A3A: 88 1E 62 0F                           	mov day,bl					;Decrement
[1006]    0A3E: E8 0B FB                              	call display
[1007]    0A41: EB A7                                 	jmp da1
[1008]    0A43: 3C 02                                 da3:	cmp al,02h
[1009]    0A45: 75 A3                                 	jne da1
[1010]    0A47: 8A 1E 62 0F                           	mov bl,day
[1011]    0A4B: 3A 1E 5D 0F                           	cmp bl,count_day			;Increment
[1012]    0A4F: 75 02                                 	jne da5
[1013]    0A51: B3 00                                 	mov bl,0
[1014]    0A53: FE C3                                 da5:	inc bl
[1015]    0A55: 88 1E 62 0F                           	mov day,bl	
[1016]    0A59: E8 F0 FA                              	call display
[1017]    0A5C: EB 8C                                 	jmp da1
[1018]    0A5E: C3                                    da2:	ret
[1019]        :                                       set_date endp	
[1020]        :                                       
[1021]        :                                       						;set_second	
[1022]    0A5F:                                       set_second proc near
[1023]    0A5F: E8 EA FA                              call display
[1024]    0A62: E4 04                                 s1:	in al,port1c
[1025]    0A64: 3C 20                                 	cmp al,20h
[1026]    0A66: 75 6C                                 	jnz s2
[1027]        :                                       	
[1028]    0A68: E4 00                                 	    in al,port1a			;Check format
[1029]    0A6A: 24 01                                 		and al,01h		
[1030]    0A6C: 8A 1E 67 0F                           		mov bl,format_check	
[1031]    0A70: 3A C3                                 		cmp al,bl
[1032]    0A72: 74 03                                 		je n9		
[1033]    0A74: E8 D5 FA                              		call display		;display if format changed
[1034]    0A77:                                       n9:   		
[1035]    0A77: E4 04                                 		in al,port1c		;check set_second  debounce
[1036]    0A79: 3C 20                                 		cmp al,20h		
[1037]    0A7B: 75 57                                 		jne s2			
[1038]    0A7D: E4 00                                 		in al,port1a		
[1039]    0A7F: 24 01                                 		and al,01h
[1040]    0A81: 8A 1E 67 0F                           		mov bl,format_check
[1041]    0A85: 3A C3                                 		cmp al,bl				
[1042]    0A87: 74 03                                 		je n10			
[1043]    0A89: E8 C0 FA                              		call display
[1044]        :                                       
[1045]    0A8C: E4 02                                 n10:	    in al,port1b			;debounce for inc/dec
[1046]    0A8E: 3C 00                                 	cmp al,00
[1047]    0A90: 74 E5                                 	je n9
[1048]    0A92: 8A D8                                 	mov bl,al
[1049]    0A94: E8 AC FA                              	call delay_20ms
[1050]    0A97: E4 02                                 	in al,port1b
[1051]    0A99: 3A C3                                 	cmp al,bl
[1052]    0A9B: 75 DA                                 	jne n9
[1053]        :                                       		
[1054]    0A9D: E4 02                                 	in al,port1b
[1055]    0A9F: 3C 01                                 	cmp al,01h
[1056]    0AA1: 75 17                                 	jnz s3
[1057]    0AA3: 8A 1E 5F 0F                           	mov bl,second
[1058]    0AA7: 80 FB 00                              	cmp bl,0
[1059]    0AAA: 75 03                                 	jnz s4
[1060]    0AAC: 80 C3 3C                              	add bl,60
[1061]    0AAF: FE CB                                 s4:	dec bl				;Decrement
[1062]    0AB1: 88 1E 5F 0F                           	mov second,bl
[1063]    0AB5: E8 94 FA                              	call display
[1064]    0AB8: EB A8                                 	jmp s1
[1065]        :                                       	
[1066]    0ABA: 3C 02                                 s3:	cmp al,02h
[1067]    0ABC: 75 A4                                 	jnz s1				;Increment
[1068]    0ABE: 8A 1E 5F 0F                           	mov bl,second
[1069]    0AC2: FE C3                                 	inc bl
[1070]    0AC4: 80 FB 3C                              	cmp bl,60
[1071]    0AC7: 75 02                                 	jnz s5
[1072]    0AC9: B3 00                                 	mov bl,0
[1073]    0ACB: 88 1E 5F 0F                           s5:	mov second,bl
[1074]    0ACF: E8 7A FA                              	call display
[1075]    0AD2: EB 8E                                 	jmp s1
[1076]        :                                       
[1077]    0AD4: C3                                    s2:	ret				
[1078]        :                                       
[1079]        :                                       set_second endp
[1080]        :                                       
[1081]        :                                       
[1082]        :                                       
[1083]        :                                       
[1084]        :                                       								;set_year
[1085]    0AD5:                                       set_year proc near
[1086]    0AD5: E8 74 FA                              call display
[1087]    0AD8: E4 04                                 ye1:	in al,port1c
[1088]    0ADA: 3C 04                                 	cmp al,04h
[1089]    0ADC: 75 6E                                 	jne ye2
[1090]        :                                       	
[1091]    0ADE: E4 00                                 	    	in al,port1a			;Check format
[1092]    0AE0: 24 01                                 		and al,01h		
[1093]    0AE2: 8A 1E 67 0F                           		mov bl,format_check	
[1094]    0AE6: 3A C3                                 		cmp al,bl
[1095]    0AE8: 75 03 E9 9C FE                        		je n5		
[1096]    0AED: E8 5C FA                              		call display		;display if format changed
[1097]    0AF0:                                       n11:   		
[1098]    0AF0: E4 04                                 		in al,port1c		;check set_year  debounce
[1099]    0AF2: 3C 04                                 		cmp al,04h		
[1100]    0AF4: 75 56                                 		jne ye2			
[1101]    0AF6: E4 00                                 		in al,port1a		
[1102]    0AF8: 24 01                                 		and al,01h
[1103]    0AFA: 8A 1E 67 0F                           		mov bl,format_check
[1104]    0AFE: 3A C3                                 		cmp al,bl				
[1105]    0B00: 74 03                                 		je n12			
[1106]    0B02: E8 47 FA                              		call display
[1107]        :                                       
[1108]    0B05: E4 02                                 n12:	in al,port1b			;debounce for inc/dec
[1109]    0B07: 3C 00                                 	cmp al,00
[1110]    0B09: 74 E5                                 	je n11
[1111]    0B0B: 8A D8                                 	mov bl,al
[1112]    0B0D: E8 33 FA                              	call delay_20ms
[1113]    0B10: E4 02                                 	in al,port1b
[1114]    0B12: 3A C3                                 	cmp al,bl
[1115]    0B14: 75 DA                                 	jne n11	
[1116]        :                                       		
[1117]    0B16: E4 02                                 	in al,port1b
[1118]    0B18: 3C 01                                 	cmp al,01h
[1119]    0B1A: 75 16                                 	jne ye3
[1120]    0B1C: 8A 1E 64 0F                           	mov bl,year
[1121]    0B20: 80 FB 00                              	cmp bl,00
[1122]    0B23: 75 02                                 	jne ye4
[1123]    0B25: FE C3                                 	inc bl
[1124]    0B27: FE CB                                 ye4:	dec bl				;Decrement
[1125]    0B29: 88 1E 64 0F                           	mov year,bl
[1126]    0B2D: E8 1C FA                              	call display
[1127]    0B30: EB A6                                 	jmp ye1
[1128]    0B32: 3C 02                                 ye3:	cmp al,02h
[1129]    0B34: 75 A2                                 	jne ye1
[1130]    0B36: 8A 1E 64 0F                           	mov bl,year
[1131]        :                                       	
[1132]    0B3A: 80 FB 63                              	cmp bl,99
[1133]    0B3D: 75 02                                 	jne ye5
[1134]    0B3F: FE CB                                 	dec bl					;Increment
[1135]    0B41: FE C3                                 ye5:	inc bl
[1136]    0B43: 88 1E 64 0F                           	mov year,bl
[1137]    0B47: E8 02 FA                              	call display
[1138]    0B4A: EB 8C                                 	jmp ye1
[1139]    0B4C: C3                                    ye2:	ret
[1140]        :                                       set_year endp
[1141]        :                                       					
[1142]        :                                       
[1143]        :                                       
[1144]        :                                       	;set_alarm_hour		
[1145]        :                                       
[1146]    0B4D:                                       set_alarm_hour proc near
[1147]        :                                       
[1148]    0B4D: C6 06 6A 0F 00                        mov alarm_hour,00				; default values of set_alarm hour
[1149]    0B52: C6 06 6B 0F 0C                        mov alarm_hour_12,12
[1150]    0B57: C6 06 6D 0F 00                        mov alarm_phase,0
[1151]        :                                       							
[1152]    0B5C:                                       alh1:	
[1153]    0B5C: E4 04                                 	in al,port1c				
[1154]    0B5E: 3C 02                                 	cmp al,02h
[1155]    0B60: 74 03 E9 F7 00                        	jne alh2					;If set alarm hour is not selected, end.
[1156]        :                                       	
[1157]    0B65: E4 00                                 	in al,port1a				;Checking alarm on or off
[1158]    0B67: 24 10                                 	and al,10h					
[1159]    0B69: 3C 10                                 	cmp al,10h				
[1160]    0B6B: 74 03 E9 EC 00                        	jne alh2					
[1161]        :                                       	
[1162]    0B70: E8 B1 02                              	call alarm_display				
[1163]        :                                       	
[1164]    0B73: E4 00                                 	    in al,port1a			;Check format
[1165]    0B75: 24 01                                 		and al,01h		
[1166]    0B77: 8A 1E 67 0F                           		mov bl,format_check	
[1167]    0B7B: 3A C3                                 		cmp al,bl
[1168]    0B7D: 74 03                                 		je n13		
[1169]    0B7F: E8 A2 02                              		call alarm_display		;display if format changed
[1170]    0B82:                                       n13:   		
[1171]    0B82: E4 04                                 		in al,port1c		;check set_alarm_hour  debounce
[1172]    0B84: 3C 02                                 		cmp al,02h		
[1173]    0B86: 74 03 E9 D1 00                        		jne alh2			
[1174]    0B8B: E4 00                                 		in al,port1a		
[1175]    0B8D: 24 01                                 		and al,01h
[1176]    0B8F: 8A 1E 67 0F                           		mov bl,format_check
[1177]    0B93: 3A C3                                 		cmp al,bl				
[1178]    0B95: 74 03                                 		je n14			
[1179]    0B97: E8 8A 02                              		call alarm_display
[1180]        :                                       
[1181]    0B9A: E4 02                                 n14:	    in al,port1b			;debounce for inc/dec
[1182]    0B9C: 3C 00                                 	cmp al,00
[1183]    0B9E: 74 E2                                 	je n13
[1184]    0BA0: 8A D8                                 	mov bl,al
[1185]    0BA2: E8 9E F9                              	call delay_20ms
[1186]    0BA5: E4 02                                 	in al,port1b
[1187]    0BA7: 3A C3                                 	cmp al,bl
[1188]    0BA9: 75 D7                                 	jne n13			
[1189]        :                                       										
[1190]    0BAB: E4 02                                 	in al,port1b				
[1191]    0BAD: 3C 01                                 	cmp al,01h					
[1192]    0BAF: 75 52                                 	jnz alh3						
[1193]    0BB1: 8A 1E 6A 0F                           	mov bl,alarm_hour		
[1194]    0BB5: FE CB                                 	dec bl						;decrement alarm_hour
[1195]    0BB7: 80 FB 00                              	cmp bl,00
[1196]    0BBA: 7D 02                                 	jge alh5
[1197]    0BBC: B3 17                                 	mov bl,23					; if the hour becomes less than 0, make it 23
[1198]        :                                       	
[1199]    0BBE:                                       alh5:
[1200]    0BBE: 88 1E 6A 0F                           	mov alarm_hour,bl
[1201]        :                                       								;12hr format
[1202]    0BC2: A0 6A 0F                              	mov al,alarm_hour
[1203]    0BC5: 3C 00                                 		cmp al,00
[1204]    0BC7: 75 0C                                 		jne alha1
[1205]    0BC9: C6 06 6B 0F 0C                        		mov alarm_hour_12 , 12
[1206]    0BCE: C6 06 6D 0F 00                        		mov alarm_phase,0
[1207]    0BD3: EB 28                                 		jmp exita1
[1208]    0BD5:                                       alha1:		
[1209]    0BD5: 3C 0C                                 		cmp al,12
[1210]    0BD7: 75 0C                                 		jne alha4
[1211]    0BD9: C6 06 6B 0F 0C                        		mov alarm_hour_12,12
[1212]    0BDE: C6 06 6D 0F 01                        		mov alarm_phase,1				
[1213]    0BE3: EB 18                                 		jmp exita1
[1214]    0BE5: 3C 0C                                 alha4:		cmp al,12
[1215]    0BE7: 77 0A                                 		ja alha2
[1216]    0BE9: A2 6B 0F                              		mov alarm_hour_12,al
[1217]    0BEC: C6 06 6D 0F 00                        		mov alarm_phase,0
[1218]    0BF1: EB 0A                                 		jmp exita1
[1219]    0BF3: 2C 0C                                 alha2:		sub al,12
[1220]    0BF5: A2 6B 0F                              		mov alarm_hour_12,al	
[1221]    0BF8: C6 06 6D 0F 01                        		mov alarm_phase,1
[1222]        :                                       							;end
[1223]    0BFD: E8 24 02                              exita1:	call alarm_display				
[1224]    0C00: E9 59 FF                              		jmp alh1						
[1225]    0C03: 3C 02                                 alh3:		cmp al,02h								
[1226]    0C05: 74 03 E9 52 FF                        		jne alh1
[1227]    0C0A: 8A 1E 6A 0F                           		mov bl,alarm_hour
[1228]    0C0E: FE C3                                 		inc bl
[1229]    0C10: 80 FB 18                              		cmp bl,24
[1230]    0C13: 72 02                                 		jb alh6
[1231]    0C15: B3 00                                 		mov bl,00
[1232]    0C17: 88 1E 6A 0F                           alh6:		mov alarm_hour,bl
[1233]        :                                       		;12hr
[1234]    0C1B: A0 6A 0F                              		mov al,alarm_hour
[1235]    0C1E: 3C 00                                 		cmp al,00
[1236]    0C20: 75 0C                                 		jne alhb1						
[1237]    0C22: C6 06 6B 0F 0C                        		mov alarm_hour_12 , 12
[1238]    0C27: C6 06 6D 0F 00                        		mov alarm_phase,0
[1239]    0C2C: EB 28                                 		jmp exita2
[1240]    0C2E: 3C 0C                                 alhb1:		cmp al,12
[1241]    0C30: 75 0C                                 		jne alhb4
[1242]    0C32: C6 06 6B 0F 0C                        		mov alarm_hour_12,12
[1243]    0C37: C6 06 6D 0F 01                        		mov alarm_phase,1
[1244]    0C3C: EB 18                                 		jmp exita2
[1245]    0C3E: 3C 0C                                 alhb4:		cmp al,12
[1246]    0C40: 77 0A                                 		ja alhb2
[1247]    0C42: A2 6B 0F                              		mov alarm_hour_12,al
[1248]    0C45: C6 06 6D 0F 00                        		mov alarm_phase,0
[1249]    0C4A: EB 0A                                 		jmp exita2
[1250]    0C4C: 2C 0C                                 alhb2:		sub al,12
[1251]    0C4E: A2 6B 0F                              		mov alarm_hour_12,al	
[1252]    0C51: C6 06 6D 0F 01                        		mov alarm_phase,1
[1253]        :                                       								;end
[1254]    0C56: E8 CB 01                              exita2:	call alarm_display
[1255]    0C59: E9 00 FF                              		jmp alh1				
[1256]        :                                       	
[1257]    0C5C: C3                                    alh2:	ret							
[1258]        :                                       
[1259]        :                                       set_alarm_hour endp
[1260]        :                                       
[1261]        :                                       								;set_alarm_min
[1262]    0C5D:                                       set_alarm_min proc near
[1263]    0C5D: C6 06 6C 0F 00                        	mov alarm_min,00
[1264]        :                                       	
[1265]    0C62: E4 00                                 al1:	in al,port1a
[1266]    0C64: 24 10                                 		and al,10h					;checking if set_alarm minute is on
[1267]    0C66: 3C 10                                 		cmp al,10h	
[1268]    0C68: 75 76                                 		jne al2						;end if off
[1269]    0C6A: E4 04                                 		in al,port1c
[1270]    0C6C: 3C 01                                 		cmp al,01h
[1271]    0C6E: 75 70                                 		jnz al2 						
[1272]    0C70: E8 B1 01                              		call alarm_display				
[1273]        :                                       		
[1274]    0C73: E4 00                                 		in al,port1a			;Check format
[1275]    0C75: 24 01                                 		and al,01h		
[1276]    0C77: 8A 1E 67 0F                           		mov bl,format_check	
[1277]    0C7B: 3A C3                                 		cmp al,bl
[1278]    0C7D: 74 03                                 		je n15		
[1279]    0C7F: E8 A2 01                              		call alarm_display		;display if format changed
[1280]    0C82:                                       n15:   		
[1281]    0C82: E4 04                                 		in al,port1c		;check set_alarm_min  debounce
[1282]    0C84: 3C 01                                 		cmp al,01h		
[1283]    0C86: 75 58                                 		jne al2			
[1284]    0C88: E4 00                                 		in al,port1a		
[1285]    0C8A: 24 01                                 		and al,01h
[1286]    0C8C: 8A 1E 67 0F                           		mov bl,format_check
[1287]    0C90: 3A C3                                 		cmp al,bl				
[1288]    0C92: 74 03                                 		je n16			
[1289]    0C94: E8 8D 01                              		call alarm_display
[1290]        :                                       
[1291]    0C97: E4 02                                 n16:	    in al,port1b			;debounce for inc/dec
[1292]    0C99: 3C 00                                 	cmp al,00
[1293]    0C9B: 74 E5                                 	je n15
[1294]    0C9D: 8A D8                                 	mov bl,al
[1295]    0C9F: E8 A1 F8                              	call delay_20ms
[1296]    0CA2: E4 02                                 	in al,port1b
[1297]    0CA4: 3A C3                                 	cmp al,bl
[1298]    0CA6: 75 DA                                 	jne n15
[1299]        :                                       		
[1300]    0CA8: E4 02                                 		in al,port1b					
[1301]    0CAA: E4 02                                 		in al,port1b
[1302]    0CAC: 3C 01                                 		cmp al,01h					; decrement
[1303]    0CAE: 75 16                                 		jnz al3
[1304]    0CB0: 8A 1E 6C 0F                           		mov bl,alarm_min
[1305]    0CB4: FE CB                                 		dec bl
[1306]    0CB6: 80 FB 00                              		cmp bl,00
[1307]    0CB9: 7D 02                                 		jge al5
[1308]    0CBB: B3 3B                                 		mov bl,59
[1309]    0CBD: 88 1E 6C 0F                           al5:		mov alarm_min,bl
[1310]    0CC1: E8 60 01                              		call alarm_display
[1311]    0CC4: EB 9C                                 		jmp al1						
[1312]    0CC6: 3C 02                                 al3:		cmp al,02h
[1313]    0CC8: 75 98                                 		jne al1						;increment
[1314]    0CCA: 8A 1E 6C 0F                           		mov bl,alarm_min
[1315]    0CCE: FE C3                                 		inc bl
[1316]    0CD0: 80 FB 3C                              		cmp bl,60
[1317]    0CD3: 75 02                                 		jne al6
[1318]    0CD5: B3 00                                 		mov bl,00
[1319]    0CD7: 88 1E 6C 0F                           al6:		mov alarm_min,bl
[1320]    0CDB: E8 46 01                              		call alarm_display
[1321]    0CDE: EB 82                                 		jmp al1						
[1322]    0CE0: C3                                    al2:		ret
[1323]        :                                       
[1324]        :                                       								
[1325]        :                                       
[1326]        :                                       		set_alarm_min endp
[1327]        :                                       ;end of set_alarm_min
[1328]        :                                       
[1329]        :                                       
[1330]        :                                       	; procedure to make the buzzer ring in the required sequence for an iPhone alarm(Notes: GGA#CCA#GCFCA#CF): One sequence takes approx. 3 secs
[1331]    0CE1:                                       buzzer proc near
[1332]    0CE1: A0 6A 0F                              		mov al,alarm_hour							
[1333]    0CE4: 8A 26 61 0F                           		mov ah,hour					
[1334]    0CE8: 3A C4                                 		cmp al,ah						;if current hour != alarm_hour, then ret
[1335]    0CEA: 74 03 E9 30 01                        		jne esc1						;else, check min
[1336]        :                                       		
[1337]    0CEF: A0 6C 0F                              		mov al,alarm_min				; if current min is not equal to alarm_min, then ret
[1338]    0CF2: 8A 26 60 0F                           		mov ah,min						; else, ring buzzer
[1339]    0CF6: 3A C4                                 		cmp al,ah
[1340]    0CF8: 74 03 E9 22 01                        		jne esc1
[1341]        :                                       							
[1342]        :                                       								
[1343]        :                                       							
[1344]    0CFD:                                       buzz:		
[1345]    0CFD: E4 00                                 		in al,port1a				;check if alarm on 	
[1346]    0CFF: 24 10                                 		and al,10h
[1347]    0D01: 3C 10                                 		cmp al,10h					
[1348]    0D03: 74 03 E9 17 01                        		jne esc1					; if not on, ret
[1349]    0D08: 8A 26 60 0F                           		mov ah,min					
[1350]    0D0C: 3A 26 6C 0F                           		cmp ah,alarm_min
[1351]    0D10: 74 03 E9 0A 01                        		jne esc1			        ; end if alarm_min not = min
[1352]    0D15: B0 00                                 		mov al,00h						
[1353]    0D17: E6 10                                 		out port2a,al		
[1354]        :                                       		
[1355]        :                                       		
[1356]    0D19: 51                                    		push cx
[1357]        :                                       		
[1358]    0D1A: B9 0A 00                              		mov cx, 10
[1359]    0D1D:                                       	pause:								; pause for 20ms
[1360]    0D1D: E8 23 F8                              		call delay_20ms
[1361]    0D20: E2 FB                                 		loop pause
[1362]        :                                       		; pop cx
[1363]        :                                       		
[1364]        :                                       		
[1365]    0D22: B0 04                                 	    mov al, 04h
[1366]    0D24: E6 10                                 		out port2a, al
[1367]        :                                       		; push cx
[1368]    0D26: B9 0A 00                              		mov cx, 10
[1369]    0D29:                                       	G1:	
[1370]    0D29: E8 17 F8                              		call delay_20ms
[1371]    0D2C: E2 FB                                 		loop G1
[1372]        :                                       		; pop cx
[1373]    0D2E: B0 00                                 		mov al,00h						
[1374]    0D30: E6 10                                 		out port2a,al
[1375]    0D32: E8 0E F8                              		call delay_20ms
[1376]    0D35: E8 0B F8                              		call delay_20ms
[1377]    0D38: E8 08 F8                              		call delay_20ms
[1378]    0D3B: B0 04                                 		mov al, 04h					; ring the buzzer of note G for 200ms and pause
[1379]    0D3D: E6 10                                 		out port2a, al
[1380]        :                                       		
[1381]    0D3F: B9 0A 00                              		mov cx, 10
[1382]    0D42:                                       	G2:	
[1383]    0D42: E8 FE F7                              		call delay_20ms
[1384]    0D45: E2 FB                                 		loop G2
[1385]        :                                       		
[1386]    0D47: B0 00                                 		mov al,00h						
[1387]    0D49: E6 10                                 		out port2a,al
[1388]    0D4B: E8 F5 F7                              		call delay_20ms
[1389]    0D4E: E8 F2 F7                              		call delay_20ms
[1390]    0D51: B0 02                                 		mov al, 2					; ring the buzzer of note G for 200ms and pause
[1391]    0D53: E6 10                                 		out port2a, al
[1392]        :                                       		
[1393]    0D55: B9 0A 00                              		mov cx, 10
[1394]    0D58:                                       	A#1:	
[1395]    0D58: E8 E8 F7                              		call delay_20ms
[1396]    0D5B: E2 FB                                 		loop A#1
[1397]        :                                       		
[1398]    0D5D: B0 00                                 		mov al,00h						
[1399]    0D5F: E6 10                                 		out port2a,al
[1400]    0D61: E8 DF F7                              		call delay_20ms
[1401]    0D64: B0 01                                 		mov al, 1					; ring the buzzer of note A# for 200ms and pause
[1402]    0D66: E6 10                                 		out port2a, al
[1403]        :                                       		
[1404]    0D68: B9 0A 00                              		mov cx, 10
[1405]    0D6B:                                       	C1:	
[1406]    0D6B: E8 D5 F7                              		call delay_20ms
[1407]    0D6E: E2 FB                                 		loop C1
[1408]        :                                       		
[1409]    0D70: B0 00                                 		mov al,00h						
[1410]    0D72: E6 10                                 		out port2a,al
[1411]    0D74: E8 CC F7                              		call delay_20ms
[1412]    0D77: B0 01                                 		mov al, 1					; ring the buzzer of note C for 200ms and pause
[1413]    0D79: E6 10                                 		out port2a, al
[1414]        :                                       		
[1415]    0D7B: B9 0A 00                              		mov cx, 10
[1416]        :                                       		
[1417]    0D7E:                                       	C2:	
[1418]    0D7E: E8 C2 F7                              		call delay_20ms
[1419]    0D81: E2 FB                                 		loop C2
[1420]        :                                       		
[1421]    0D83: B0 00                                 		mov al,00h						
[1422]    0D85: E6 10                                 		out port2a,al
[1423]    0D87: E8 B9 F7                              		call delay_20ms
[1424]    0D8A: B0 02                                 		mov al, 2					; ring the buzzer of note C for 200ms and pause
[1425]    0D8C: E6 10                                 		out port2a, al
[1426]        :                                       		
[1427]    0D8E: B9 0A 00                              		mov cx,10
[1428]        :                                       	
[1429]    0D91:                                       	A#2:	
[1430]    0D91: E8 AF F7                              		call delay_20ms
[1431]    0D94: E2 FB                                 		loop A#2
[1432]        :                                       		
[1433]    0D96: B0 00                                 		mov al,00h						
[1434]    0D98: E6 10                                 		out port2a,al
[1435]    0D9A: E8 A6 F7                              		call delay_20ms
[1436]    0D9D: B0 04                                 		mov al, 4					; ring the buzzer of note A# for 200ms and pause
[1437]    0D9F: E6 10                                 		out port2a, al
[1438]        :                                       	
[1439]    0DA1: B9 0A 00                              		mov cx, 10
[1440]    0DA4:                                       	G3:	
[1441]    0DA4: E8 9C F7                              		call delay_20ms
[1442]    0DA7: E2 FB                                 		loop G3
[1443]        :                                       		
[1444]    0DA9: B0 00                                 		mov al,00h						
[1445]    0DAB: E6 10                                 		out port2a,al
[1446]    0DAD: E8 93 F7                              		call delay_20ms
[1447]    0DB0: B0 01                                 		mov al, 1					; ring the buzzer of note G for 200ms and pause
[1448]    0DB2: E6 10                                 		out port2a, al
[1449]        :                                       		
[1450]    0DB4: B9 0A 00                              		mov cx, 10
[1451]    0DB7:                                       	C3:	
[1452]    0DB7: E8 89 F7                              		call delay_20ms
[1453]    0DBA: E2 FB                                 		loop C3
[1454]        :                                       		
[1455]    0DBC: B0 00                                 		mov al,00h						
[1456]    0DBE: E6 10                                 		out port2a,al
[1457]    0DC0: E8 80 F7                              		call delay_20ms
[1458]    0DC3: B0 08                                 		mov al, 8					; ring the buzzer of note C for 200ms and pause
[1459]    0DC5: E6 10                                 		out port2a, al
[1460]        :                                       		
[1461]    0DC7: B9 0A 00                              		mov cx, 10
[1462]    0DCA:                                       	F1:	
[1463]    0DCA: E8 76 F7                              		call delay_20ms
[1464]    0DCD: E2 FB                                 		loop F1
[1465]        :                                       		
[1466]    0DCF: B0 00                                 		mov al,00h						
[1467]    0DD1: E6 10                                 		out port2a,al
[1468]    0DD3: E8 6D F7                              		call delay_20ms
[1469]    0DD6: B0 01                                 		mov al, 1					; ring the buzzer of note F for 200ms and pause
[1470]    0DD8: E6 10                                 		out port2a, al
[1471]        :                                       		
[1472]    0DDA: B9 0A 00                              		mov cx, 10
[1473]    0DDD:                                       	C4:	
[1474]    0DDD: E8 63 F7                              		call delay_20ms
[1475]    0DE0: E2 FB                                 		loop C4
[1476]        :                                       		
[1477]    0DE2: B0 00                                 		mov al,00h						
[1478]    0DE4: E6 10                                 		out port2a,al
[1479]    0DE6: E8 5A F7                              		call delay_20ms
[1480]    0DE9: B0 02                                 		mov al, 2					; ring the buzzer of note C for 200ms and pause
[1481]    0DEB: E6 10                                 		out port2a, al
[1482]        :                                       		
[1483]    0DED: B9 0A 00                              		mov cx, 10
[1484]    0DF0:                                       	A#3:	
[1485]    0DF0: E8 50 F7                              		call delay_20ms
[1486]    0DF3: E2 FB                                 		loop A#3
[1487]        :                                       		
[1488]    0DF5: B0 00                                 		mov al,00h						
[1489]    0DF7: E6 10                                 		out port2a,al
[1490]    0DF9: E8 47 F7                              		call delay_20ms
[1491]    0DFC: B0 01                                 		mov al, 1					; ring the buzzer of note A# for 200ms and pause
[1492]    0DFE: E6 10                                 		out port2a, al
[1493]        :                                       		
[1494]    0E00: B9 0A 00                              		mov cx, 10
[1495]    0E03:                                       	C5:	
[1496]    0E03: E8 3D F7                              		call delay_20ms
[1497]    0E06: E2 FB                                 		loop C5
[1498]        :                                       		
[1499]    0E08: B0 00                                 		mov al,00h						
[1500]    0E0A: E6 10                                 		out port2a,al
[1501]    0E0C: E8 34 F7                              		call delay_20ms
[1502]    0E0F: B0 08                                 		mov al, 8					; ring the buzzer of note C for 200ms and pause. Ring the buzzer of note F for 200ms and check if alarm_min= min
[1503]    0E11: E6 10                                 		out port2a, al
[1504]        :                                       		
[1505]    0E13: B9 0A 00                              		mov cx, 10
[1506]    0E16:                                       	F2:	
[1507]    0E16: E8 2A F7                              		call delay_20ms
[1508]    0E19: E2 FB                                 		loop F2
[1509]        :                                       		
[1510]    0E1B: 59                                    		pop cx
[1511]        :                                       		
[1512]    0E1C: E9 DE FE                              		jmp buzz						; if min == alarm_min, keep rining the buzzer
[1513]        :                                       		
[1514]    0E1F: B0 00                                 esc1:		mov al,00h
[1515]    0E21: E6 10                                 		out port2a,al				;Stop buzzer sound
[1516]        :                                       	
[1517]    0E23: C3                                    		ret
[1518]        :                                       buzzer endp	
[1519]        :                                       
[1520]    0E24:                                       alarm_display proc near
[1521]        :                                       	
[1522]        :                                       	;input format
[1523]    0E24: E4 00                                 	in al,port1a
[1524]    0E26: 24 01                                 	and al,01h
[1525]    0E28: A2 67 0F                              	mov format_check,al
[1526]        :                                       	
[1527]        :                                       	;clear screen
[1528]    0E2B: B0 01                                 		mov al,01h
[1529]    0E2D: E6 12                                 		out port2b,al
[1530]    0E2F: B0 01                                 		mov al,01h
[1531]    0E31: E6 14                                 		out port2c,al
[1532]    0E33: B0 00                                 		mov al,00h
[1533]    0E35: E6 14                                 		out port2c,al
[1534]    0E37: E8 09 F7                              		call delay_20ms
[1535]        :                                       		
[1536]        :                                       	; display hour
[1537]        :                                       	;check format
[1538]    0E3A: A0 67 0F                              		mov al,format_check
[1539]    0E3D: 3C 01                                 		cmp al,1
[1540]    0E3F: 75 3C                                 		jne ahr12
[1541]        :                                       		
[1542]        :                                       		;display alarm_hour_24
[1543]    0E41: A0 6A 0F                              		mov al,alarm_hour
[1544]    0E44: 8A D8                                 		mov       bl,al
[1545]    0E46: B0 00                                 	    mov       al,0          ; converting hex to dec value
[1546]    0E48: 04 01                                 x8:		add       al,01
[1547]    0E4A: 27                                    	    daa
[1548]    0E4B: FE CB                                 	    dec       bl
[1549]    0E4D: 75 F9                                 	    jnz       x8
[1550]    0E4F: A2 65 0F                              		mov digit,al
[1551]        :                                       		
[1552]    0E52: 24 F0                                 		and al,0f0h
[1553]    0E54: B1 04                                 		mov cl,4
[1554]    0E56: D2 C0                                 		rol al,cl
[1555]    0E58: 04 30                                 		add al,30h
[1556]        :                                       		
[1557]    0E5A: E6 12                                 		out port2b,al
[1558]    0E5C: B0 11                                 		mov al,11h
[1559]    0E5E: E6 14                                 		out port2c,al
[1560]    0E60: B0 10                                 		mov al,10h
[1561]    0E62: E6 14                                 		out port2c,al
[1562]    0E64: E8 DC F6                              		call delay_20ms
[1563]        :                                       		
[1564]    0E67: A0 65 0F                              		mov al,digit
[1565]    0E6A: 24 0F                                 		and al,0fh
[1566]    0E6C: 04 30                                 		add al,30h
[1567]        :                                       		
[1568]    0E6E: E6 12                                 		out port2b,al
[1569]    0E70: B0 11                                 		mov al,11h
[1570]    0E72: E6 14                                 		out port2c,al
[1571]    0E74: B0 10                                 		mov al,10h
[1572]    0E76: E6 14                                 		out port2c,al
[1573]    0E78: E8 C8 F6                              		call delay_20ms
[1574]        :                                       		;display alarm_hour_24 completed
[1575]        :                                       		
[1576]    0E7B: EB 3A                                 		jmp skip3
[1577]        :                                       		
[1578]        :                                       		;display alarm_hour_12
[1579]    0E7D:                                       ahr12:	
[1580]    0E7D: A0 6B 0F                              		mov al,alarm_hour_12
[1581]    0E80: 8A D8                                 		mov       bl,al
[1582]    0E82: B0 00                                 	    mov       al,0          ; converting hex to dec value
[1583]    0E84: 04 01                                 x9:		add       al,01
[1584]    0E86: 27                                    	    daa
[1585]    0E87: FE CB                                 	    dec       bl
[1586]    0E89: 75 F9                                 	    jnz       x9
[1587]    0E8B: A2 65 0F                              		mov digit,al
[1588]        :                                       		
[1589]    0E8E: 24 F0                                 		and al,0f0h
[1590]    0E90: B1 04                                 		mov cl,4
[1591]    0E92: D2 C0                                 		rol al,cl
[1592]    0E94: 04 30                                 		add al,30h
[1593]        :                                       		
[1594]    0E96: E6 12                                 		out port2b,al
[1595]    0E98: B0 11                                 		mov al,11h
[1596]    0E9A: E6 14                                 		out port2c,al
[1597]    0E9C: B0 10                                 		mov al,10h
[1598]    0E9E: E6 14                                 		out port2c,al
[1599]    0EA0: E8 A0 F6                              		call delay_20ms
[1600]        :                                       		
[1601]    0EA3: A0 65 0F                              		mov al,digit
[1602]    0EA6: 24 0F                                 		and al,0fh
[1603]    0EA8: 04 30                                 		add al,30h
[1604]        :                                       		
[1605]    0EAA: E6 12                                 		out port2b,al
[1606]    0EAC: B0 11                                 		mov al,11h
[1607]    0EAE: E6 14                                 		out port2c,al
[1608]    0EB0: B0 10                                 		mov al,10h
[1609]    0EB2: E6 14                                 		out port2c,al
[1610]    0EB4: E8 8C F6                              		call delay_20ms
[1611]        :                                       		;display alarm_hour_12 completed
[1612]        :                                       		
[1613]        :                                       		;displaying ':'
[1614]    0EB7: B0 3A                                 skip3:	mov al,3ah
[1615]    0EB9: E6 12                                 		out port2b,al
[1616]    0EBB: B0 11                                 		mov al,11h
[1617]    0EBD: E6 14                                 		out port2c,al
[1618]    0EBF: B0 10                                 		mov al,10h
[1619]    0EC1: E6 14                                 		out port2c,al
[1620]    0EC3: E8 7D F6                              		call delay_20ms
[1621]        :                                       		
[1622]        :                                       		;display alarm_min
[1623]        :                                       		
[1624]    0EC6: A0 6C 0F                              		mov al,alarm_min
[1625]    0EC9: 8A D8                                 		mov       bl,al
[1626]    0ECB: B0 00                                 	    mov       al,0          ; converting hex to dec value
[1627]    0ECD: 04 01                                 x10:	add       al,01
[1628]    0ECF: 27                                    	    daa
[1629]    0ED0: FE CB                                 	    dec       bl
[1630]    0ED2: 75 F9                                 	    jnz       x10
[1631]    0ED4: A2 65 0F                              		mov digit,al
[1632]        :                                       		
[1633]    0ED7: 24 F0                                 		and al,0f0h
[1634]    0ED9: B1 04                                 		mov cl,4
[1635]    0EDB: D2 C0                                 		rol al,cl
[1636]    0EDD: 04 30                                 		add al,30h
[1637]        :                                       		
[1638]    0EDF: E6 12                                 		out port2b,al
[1639]    0EE1: B0 11                                 		mov al,11h
[1640]    0EE3: E6 14                                 		out port2c,al
[1641]    0EE5: B0 10                                 		mov al,10h
[1642]    0EE7: E6 14                                 		out port2c,al
[1643]    0EE9: E8 57 F6                              		call delay_20ms
[1644]        :                                       		
[1645]    0EEC: A0 65 0F                              		mov al,digit
[1646]    0EEF: 24 0F                                 		and al,0fh
[1647]    0EF1: 04 30                                 		add al,30h
[1648]        :                                       		
[1649]    0EF3: E6 12                                 		out port2b,al
[1650]    0EF5: B0 11                                 		mov al,11h
[1651]    0EF7: E6 14                                 		out port2c,al
[1652]    0EF9: B0 10                                 		mov al,10h
[1653]    0EFB: E6 14                                 		out port2c,al
[1654]    0EFD: E8 43 F6                              		call delay_20ms
[1655]        :                                       		
[1656]        :                                       		;display alarm_min end
[1657]        :                                       		
[1658]        :                                       		;check format
[1659]    0F00: A0 67 0F                              		mov al,format_check
[1660]    0F03: 3C 01                                 		cmp al,1
[1661]    0F05: 74 51                                 		je skip4
[1662]        :                                       		
[1663]        :                                       		
[1664]    0F07: B0 20                                 		mov al,20h
[1665]    0F09: E6 12                                 		out port2b, al
[1666]    0F0B: B0 11                                 		mov al,11h
[1667]    0F0D: E6 14                                 		out port2c,al
[1668]    0F0F: B0 10                                 		mov al,10h
[1669]    0F11: E6 14                                 		out port2c,al
[1670]        :                                       		;check if am/pm
[1671]    0F13: A0 6D 0F                              		mov al,alarm_phase
[1672]    0F16: 3C 01                                 		cmp al,1
[1673]    0F18: 74 20                                 		je apm1
[1674]        :                                       		
[1675]        :                                       		;display 'am'
[1676]    0F1A: B0 41                                 		mov al,41h
[1677]    0F1C: E6 12                                 		out port2b, al
[1678]    0F1E: B0 11                                 		mov al,11h
[1679]    0F20: E6 14                                 		out port2c,al
[1680]    0F22: B0 10                                 		mov al,10h
[1681]    0F24: E6 14                                 		out port2c,al
[1682]    0F26: E8 1A F6                              		call delay_20ms
[1683]        :                                       		
[1684]    0F29: B0 4D                                 		mov al,4dh
[1685]    0F2B: E6 12                                 		out port2b,al
[1686]    0F2D: B0 11                                 		mov al,11h
[1687]    0F2F: E6 14                                 		out port2c,al
[1688]    0F31: B0 10                                 		mov al,10h
[1689]    0F33: E6 14                                 		out port2c,al
[1690]    0F35: E8 0B F6                              		call delay_20ms
[1691]        :                                       		
[1692]    0F38: EB 1E                                 		jmp skip4
[1693]        :                                       		;display 'pm'
[1694]    0F3A: B0 50                                 apm1:	mov al,50h
[1695]    0F3C: E6 12                                 		out port2b, al
[1696]    0F3E: B0 11                                 		mov al,11h
[1697]    0F40: E6 14                                 		out port2c,al
[1698]    0F42: B0 10                                 		mov al,10h
[1699]    0F44: E6 14                                 		out port2c,al
[1700]    0F46: E8 FA F5                              		call delay_20ms
[1701]        :                                       		
[1702]    0F49: B0 4D                                 		mov al,4Dh
[1703]    0F4B: E6 12                                 		out port2b, al
[1704]    0F4D: B0 11                                 		mov al,11h
[1705]    0F4F: E6 14                                 		out port2c,al
[1706]    0F51: B0 10                                 		mov al,10h
[1707]    0F53: E6 14                                 		out port2c,al
[1708]    0F55: E8 EB F5                              		call delay_20ms
[1709]        :                                       
[1710]    0F58: C3                                    skip4:	ret
[1711]        :                                       alarm_display endp
[1712]        :                                       
[1713]        :                                       
[1714]        :                                       
[1715]    0F59: 00                                    stat db 00h
[1716]        :                                       ;count values
[1717]    0F5A: 3C                                    	count_sec db 60
[1718]    0F5B: 3C                                    	count_min db 60
[1719]    0F5C: 18                                    	count_hour db 24
[1720]    0F5D: 1E                                    	count_day db 30
[1721]    0F5E: 0C                                    	count_month db 12
[1722]    0F5F: 00                                    	second db 0
[1723]    0F60: 00                                    	min db 0
[1724]    0F61: 00                                    	hour db 0
[1725]    0F62: 01                                    	day db 01
[1726]    0F63: 01                                    	month db 01
[1727]    0F64: 0D                                    	year db 13
[1728]    0F65: 00                                    	digit db 0
[1729]    0F66: 00                                    	year_mod db 0
[1730]    0F67: 00                                    	format_check db 0
[1731]    0F68: 00                                    	hour_12 db 0
[1732]    0F69: 00                                    	phase db 0
[1733]        :                                       	
[1734]        :                                       ;alarm values
[1735]    0F6A: 00                                    	alarm_hour db 0
[1736]    0F6B: 00                                    	alarm_hour_12 db 0
[1737]    0F6C: 00                                    	alarm_min db 0
[1738]    0F6D: 00                                    	alarm_phase db 0
[1739]        :                                       	
[1740]        :                                       		
[1741]        :                                       
[1742]        :                                       
[1743]    0F6E: F4                                    HLT           ; halt!
[1744]        :                                       
[1745]        :                                       
[1746]        :                                       
[1747]        :                                       
 
===================================================================================================
 




===================================================================================================
